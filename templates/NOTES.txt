{{- include "deploy.validateValues" . }}

{{- if (include "deploy.serverUrl" .) }}
## To get the application URL, run:
{{ include "deploy.serverUrl" . }}
{{- end }}
## To connect over HTTP port forward on port {{ .Values.master.containerPorts.deployHttp }} use:
kubectl port-forward service/{{ include "common.names.fullname" . }} {{ .Values.master.containerPorts.deployHttp }}:{{ .Values.master.services.lb.portNames.deployHttp }}
## To get the admin password for Digitalai Deploy, run:
kubectl get secret --namespace {{ .Release.Namespace }} {{ include "common.names.fullname" . }} -o jsonpath="{.data.deployPassword}" | base64 --decode; echo

{{- if or .Values.postgresql.install .Values.external.db.enabled }}
## To get the password for main database, run:
kubectl get secret --namespace  {{ .Release.Namespace }} {{ include "common.names.fullname" . }} -o jsonpath="{.data.mainDatabasePassword}" | base64 --decode; echo
## To get the password for report database, run:
kubectl get secret --namespace  {{ .Release.Namespace }} {{ include "common.names.fullname" . }} -o jsonpath="{.data.reportDatabasePassword}" | base64 --decode; echo
{{- end }}

{{- if or .Values.rabbitmq.install .Values.external.mq.enabled }}
## To get the password for rabbitMQ, run:
kubectl get secret --namespace  {{ .Release.Namespace }} {{ include "common.names.fullname" . }} -o jsonpath="{.data.rabbitmqPassword}" | base64 --decode; echo
{{- end }}
