apiVersion: v1
kind: ConfigMap
metadata:
  name: xld-cc-configuration-management-script
  labels:
    app: {{ template "xl-deploy.name" . }}
    chart: {{ template "xl-deploy.chart" . }}
    release: {{ .Release.Name }}
data:
  op-configuration-management.sh: |-
    {{- .Values.deploy.configurationManagement.centralConfiguration.configuration.script | default "echo \"Nothing to execute.\"" | nindent 4 }}
  {{- range $key, $val := .Values.deploy.configurationManagement.centralConfiguration.configuration.scriptData }}
  {{ $key }}: |-
    {{- $val | nindent 4 }}
  {{- end }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: xld-master-configuration-management-script
  labels:
    app: {{ template "xl-deploy.name" . }}
    chart: {{ template "xl-deploy.chart" . }}
    release: {{ .Release.Name }}
data:
  op-configuration-management.sh: |-
    {{- .Values.deploy.configurationManagement.master.configuration.script | default "echo \"Nothing to execute.\"" | nindent 4 }}
  {{- range $key, $val := .Values.deploy.configurationManagement.master.configuration.scriptData }}
  {{ $key }}: |-
  {{- $val | nindent 4 }}
  {{- end }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: xld-worker-configuration-management-script
  labels:
    app: {{ template "xl-deploy.name" . }}
    chart: {{ template "xl-deploy.chart" . }}
    release: {{ .Release.Name }}
data:
  op-configuration-management.sh: |-
    {{- .Values.deploy.configurationManagement.worker.configuration.script | default "echo \"Nothing to execute.\"" | nindent 4 }}
  {{- range $key, $val := .Values.deploy.configurationManagement.worker.configuration.scriptData }}
  {{ $key }}: |-
  {{- $val | nindent 4 }}
  {{- end }}
