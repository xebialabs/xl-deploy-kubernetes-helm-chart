<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-air-gapped-installation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Deploy Installation on a Air-gapped K8S Cluster | Deploy Kubernetes Helm Chart</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://xebialabs.github.io/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deploy Installation on a Air-gapped K8S Cluster | Deploy Kubernetes Helm Chart"><meta data-rh="true" name="description" content="This is internal documentation. This document can be used only if it was recommended by the Support Team."><meta data-rh="true" property="og:description" content="This is internal documentation. This document can be used only if it was recommended by the Support Team."><link data-rh="true" rel="icon" href="/xl-deploy-kubernetes-helm-chart/img/digital_ai_deploy.svg"><link data-rh="true" rel="canonical" href="https://xebialabs.github.io/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation"><link data-rh="true" rel="alternate" href="https://xebialabs.github.io/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation" hreflang="en"><link data-rh="true" rel="alternate" href="https://xebialabs.github.io/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation" hreflang="x-default"><link rel="stylesheet" href="/xl-deploy-kubernetes-helm-chart/assets/css/styles.4f536b71.css">
<script src="/xl-deploy-kubernetes-helm-chart/assets/js/runtime~main.3b1c9610.js" defer="defer"></script>
<script src="/xl-deploy-kubernetes-helm-chart/assets/js/main.d7d8f097.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/xl-deploy-kubernetes-helm-chart/"><div class="navbar__logo"><img src="/xl-deploy-kubernetes-helm-chart/img/digital_ai_deploy.svg" alt="Deploy Kubernetes Helm Chart Digital.ai" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/xl-deploy-kubernetes-helm-chart/img/digital_ai_deploy.svg" alt="Deploy Kubernetes Helm Chart Digital.ai" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Deploy Kubernetes Helm Chart</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/xl-deploy-kubernetes-helm-chart/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xebialabs/xl-deploy-kubernetes-helm-chart" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/prerequisites">Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/chart">Chart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/tested-configuration">Tested Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/installing-storage-class">Installing Storage Class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/installing-helm-chart">Installing Helm Chart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/upgrading-helm-chart">Upgrading Helm Chart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/uninstalling-helm-chart">Uninstalling Helm Chart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/access-dashboard">Access Dashboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/parameters">Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/development">Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/useful-links">Useful links</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/building-operator-image">Building the operator image from helm chart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/make-custom-configuration">Make custom configuration for the Deploy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/integrating-with-identity-service">Manual integration with the Identity Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation">Deploy Installation on a Air-gapped K8S Cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/operator-rbac">RBAC rules for the Deploy installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xl-deploy-kubernetes-helm-chart/docs/migration-deploy-from-on-prem-to-k8s">Planning migration of an existing Digital.ai Deploy installation to Kubernetes (v23.3 and v24.1)</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/xl-deploy-kubernetes-helm-chart/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deploy Installation on a Air-gapped K8S Cluster</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Deploy Installation on a Air-gapped K8S Cluster</h1>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This is internal documentation. This document can be used only if it was recommended by the Support Team.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>From 23.3 version this document is outdated. Use official Digital.ai documentation.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#requirements">​</a></h2>
<ul>
<li>Running k8s cluster</li>
<li><code>kubectl</code> connected to the cluster</li>
<li><code>xl-cli</code> installed - version 23.1.x</li>
<li>Deploy operator - version 23.1.x</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-steps">Installation steps<a class="hash-link" aria-label="Direct link to Installation steps" title="Direct link to Installation steps" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#installation-steps">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="download-matching-version-of-the-xl-op-blueprints">Download matching version of the xl-op-blueprints<a class="hash-link" aria-label="Direct link to Download matching version of the xl-op-blueprints" title="Direct link to Download matching version of the xl-op-blueprints" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#download-matching-version-of-the-xl-op-blueprints">​</a></h3>
<p>Check what you need with <code>xl kube help</code>, for example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ xl kube help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Install, upgrade or clean Digital.ai Deploy or Digital.ai Release on a Kubernetes cluster using operator technology.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installation blueprint files are used from https://dist.xebialabs.com/public/xl-op-blueprints/23.1.x/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You need to have kubectl installed and configured for the target Kubernetes cluster.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can see from here that <code>xl kube</code> needs blueprints from location <a href="https://dist.xebialabs.com/public/xl-op-blueprints/23.1.x/" target="_blank" rel="noopener noreferrer">https://dist.xebialabs.com/public/xl-op-blueprints/23.1.x/</a>
(Note: 23.1.x denotes the appropriate version of <code>xl-op-blueprints</code> pointed by <code>xl</code>. Use the specific version in your case.)</p>
<p>You need to download and put all files from that location to the server where you will execute <code>xl kube</code>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can download zipped version of the xl-op-blueprints from here:
<a href="https://nexus.xebialabs.com/nexus/content/repositories/digitalai-public/ai/digital/xlclient/blueprints/xl-op-blueprints/" target="_blank" rel="noopener noreferrer">https://nexus.xebialabs.com/nexus/content/repositories/digitalai-public/ai/digital/xlclient/blueprints/xl-op-blueprints/</a></p><p>Unzip it to the server where you will execute <code>xl kube</code>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-operator-related-images-to-your-image-registry">Get the operator related images to your image registry<a class="hash-link" aria-label="Direct link to Get the operator related images to your image registry" title="Direct link to Get the operator related images to your image registry" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#get-the-operator-related-images-to-your-image-registry">​</a></h3>
<p>The kubernetes cluster running in airgapped environment cannot download any image from public registry (such as docker.io, gcr.io, quay.io). The images need to be pushed to a image registry accessible to the kubernetes cluster. Create either a private image repository on your cloud provider or a local image repository that is accessible to the kubernetes cluster.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisite-images">Prerequisite Images<a class="hash-link" aria-label="Direct link to Prerequisite Images" title="Direct link to Prerequisite Images" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#prerequisite-images">​</a></h4>
<p>Push the images according to your planned installation to your image repository.
For example, for version 23.1.x, following is the list of the images that you will need:</p>
<ul>
<li>docker.io/xebialabs/xl-deploy:23.1.x</li>
<li>docker.io/xebialabs/deploy-task-engine:23.1.x</li>
<li>docker.io/xebialabs/central-configuration:23.1.x</li>
<li>docker.io/xebialabs/tiny-tools:22.2.0</li>
<li>docker.io/xebialabs/deploy-operator:23.1.x</li>
<li>gcr.io/kubebuilder/kube-rbac-proxy<!-- -->:v0<!-- -->.8.0</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-nginx-include">If you are using nginx include<a class="hash-link" aria-label="Direct link to If you are using nginx include" title="Direct link to If you are using nginx include" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-nginx-include">​</a></h4>
<ul>
<li>docker.io/bitnami/nginx:1.22.1-debian-11-r44</li>
<li>docker.io/bitnami/nginx-ingress-controller:1.6.4-debian-11-r5</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-haproxy-include">If you are using haproxy include<a class="hash-link" aria-label="Direct link to If you are using haproxy include" title="Direct link to If you are using haproxy include" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-haproxy-include">​</a></h4>
<ul>
<li>quay.io/jcmoraisjr/haproxy-ingress<!-- -->:v0<!-- -->.14.2</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-embedded-keycloak-include">If you are using embedded keycloak include<a class="hash-link" aria-label="Direct link to If you are using embedded keycloak include" title="Direct link to If you are using embedded keycloak include" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-embedded-keycloak-include">​</a></h4>
<ul>
<li>docker.io/jboss/keycloak:17.0.1</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-embedded-postgresql-include">If you are using embedded postgresql include<a class="hash-link" aria-label="Direct link to If you are using embedded postgresql include" title="Direct link to If you are using embedded postgresql include" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-embedded-postgresql-include">​</a></h4>
<ul>
<li>docker.io/bitnami/postgresql:14.5.0-debian-11-r35</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-embedded-rabbitmq-include">If you are using embedded rabbitmq include<a class="hash-link" aria-label="Direct link to If you are using embedded rabbitmq include" title="Direct link to If you are using embedded rabbitmq include" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-embedded-rabbitmq-include">​</a></h4>
<ul>
<li>docker.io/bitnami/rabbitmq:3.11.10-debian-11-r0</li>
<li>docker.io/bitnami/bitnami-shell:11-debian-11-r92</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-push-image-to-internally-accessible-docker-registry">How to push image to internally accessible docker registry<a class="hash-link" aria-label="Direct link to How to push image to internally accessible docker registry" title="Direct link to How to push image to internally accessible docker registry" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#how-to-push-image-to-internally-accessible-docker-registry">​</a></h3>
<p>You need to pull the required images first on a bastion instance where public internet connectivity is there, then tag it and push it to your internally accessible docker image registry. Your kubernetes cluster will pull images from the docker registry.</p>
<p>For example with a docker registry at <code>myrepo_host</code>, the steps to push a docker image(for eg. xl-deploy) to the repository <code>myrepo</code> would be as follows.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull docker.io/xebialabs/xl-deploy:22.3.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker tag docker.io/xebialabs/xl-deploy:22.3.1 myrepo_host/myrepo/xl-deploy:22.3.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker push myrepo_host/myrepo/xl-deploy:22.3.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Make sure, you&#x27;re logged in to the docker registry before pushing the docker image.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-registry-secret-if-using-a-private-image-registry-protected-by-password">Create registry secret if using a private image registry protected by password<a class="hash-link" aria-label="Direct link to Create registry secret if using a private image registry protected by password" title="Direct link to Create registry secret if using a private image registry protected by password" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#create-registry-secret-if-using-a-private-image-registry-protected-by-password">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create secret docker-registry regcred \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --docker-server=myrepo_host \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --docker-username=&lt;reg-user&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --docker-password=&lt;reg-password&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n digitalai</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This example creates a secret <code>regcred</code> which will be used for pull secrets for pulling image when using custom private image registry.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-xl-kube-install-to-install-using-custom-docker-image-registry-option">Use <code>xl kube install</code> to install using custom docker image registry option<a class="hash-link" aria-label="Direct link to use-xl-kube-install-to-install-using-custom-docker-image-registry-option" title="Direct link to use-xl-kube-install-to-install-using-custom-docker-image-registry-option" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#use-xl-kube-install-to-install-using-custom-docker-image-registry-option">​</a></h3>
<p>When using custom docker registry, the operator image will be in the format <code>myrepo_host/myrepo/deploy-operator:image_tag</code></p>
<p>Here is example of the installation on minikube with a local docker registry running at <code>localhost:5000</code></p>
<p>In the below example the registry name is <code>localhost:5000</code>, the repository name is <code>myrepo</code>, so operator image would be like <code>localhost:5000/myrepo/deploy-operator:23.1.x</code>. Remember to override default answer and specify in this format. And also use the actual image tag version in place of <code>23.1.x</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ xl kube install -l c:\proj\xl-op-blueprints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Following kubectl context will be used during execution: `minikube`? Yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select the Kubernetes setup where the Digital.ai Devops Platform will be installed, updated or cleaned: PlainK8s [Plain multi-node K8s cluster]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Do you want to use an custom Kubernetes namespace (current default is &#x27;digitalai&#x27;): No</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Product server you want to perform install for: dai-deploy [Digital.ai Deploy]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select type of image registry: public [Custom Public Registry (Uses a specific custom registry)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the custom docker image registry name: localhost:5000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the repository name (eg: &lt;repositoryName&gt; from &lt;repositoryName&gt;/&lt;imageName&gt;:&lt;tagName&gt;): myrepo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the deploy server image name (eg: &lt;imageName&gt; from &lt;repositoryName&gt;/&lt;imageName&gt;:&lt;tagName&gt;): xl-deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the image tag (eg: &lt;tagName&gt; from &lt;repositoryName&gt;/&lt;imageName&gt;:&lt;tagName&gt;): 23.1.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the deploy task engine image name for version 22 and above (eg: &lt;imageName&gt; from &lt;repositoryName&gt;/&lt;imageName&gt;:&lt;tagName&gt;): deploy-task-engine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the central configuration image name for version 22 and above (eg: &lt;imageName&gt; from &lt;repositoryName&gt;/&lt;imageName&gt;:&lt;tagName&gt;): central-configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the deploy master server replica count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter PVC size for Deploy master (Gi): 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select between supported Access Modes: ReadWriteOnce [ReadWriteOnce]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the deploy worker replica count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter PVC size for Deploy worker (Gi): 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter PVC size for Central Configuration (Gi): 0.500000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select between supported ingress types: haproxy [HAProxy]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Do you want to enable an TLS/SSL configuration (if yes, requires existing TLS secret in the namespace): No</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Provide DNS name for accessing UI of the server: test.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Provide administrator password: 30Q5utfMV6O9wnHF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Type of the OIDC configuration: embedded [Embedded Keycloak Configuration]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Use embedded DB for keycloak: Yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter Keycloak public URL: k.test.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the operator image to use (eg: &lt;imageRegistryName&gt;/&lt;repositoryName&gt;/&lt;imageName&gt;:&lt;tagName&gt;): localhost:5000/myrepo/deploy-operator:23.1.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select source of the license: file [Path to the license file (the file can be in clean text or base64 encoded)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Provide license file for the server: c:\downloads\xld-license.lic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select source of the repository keystore: generate [Generate the repository keystore during installation (you need to have keytool utility installed in your path)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Provide keystore passphrase: 1uwAFCtUJEdwmaDi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Provide storage class for the server: standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Do you want to install a new PostgreSQL on the cluster: Yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Provide Storage Class to be defined for PostgreSQL: standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Provide PVC size for PostgreSQL (Gi): 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Do you want to install a new RabbitMQ on the cluster: Yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Replica count to be defined for RabbitMQ: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Storage Class to be defined for RabbitMQ: standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Provide PVC size for RabbitMQ (Gi): 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Do you want to proceed to the deployment with these values? Yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For current process files will be generated in the: digitalai/dai-deploy/digitalai/20221020-001911/kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generated answers file successfully: digitalai/generated_answers_dai-deploy_digitalai_install-20221020-001911.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting install processing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After the install command completes successfully, you will see operator and other resources pods coming up and running.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-steps">Upgrade steps<a class="hash-link" aria-label="Direct link to Upgrade steps" title="Direct link to Upgrade steps" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#upgrade-steps">​</a></h2>
<p>Use <code>xl kube upgrade</code> to upgrade. It is similar to installation steps. Here the already installed cluster resources are overwritten/upgraded with the newly supplied values.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-of-running-upgrade-using-custom-docker-image-registry-option">Example of running upgrade using custom docker image registry option<a class="hash-link" aria-label="Direct link to Example of running upgrade using custom docker image registry option" title="Direct link to Example of running upgrade using custom docker image registry option" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#example-of-running-upgrade-using-custom-docker-image-registry-option">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">❯ xl kube upgrade -l ./xl-op-blueprints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select type of image registry: public [Custom Public Registry (Uses a specific custom registry)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the custom docker image registry name: localhost:5000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the repository name (eg: &lt;repositoryName&gt; from &lt;repositoryName&gt;/&lt;imageName&gt;:&lt;tagName&gt;): myrepo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Enter the operator image to use (eg: &lt;imageRegistryName&gt;/&lt;repositoryName&gt;/&lt;imageName&gt;:&lt;tagName&gt;): localhost:5000/myrepo/deploy-operator:23.1.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Edit list of custom resource keys that will migrate to the new Deploy CR: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Do you want to proceed to the deployment with these values? Yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For current process files will be generated in the: digitalai/dai-deploy/digitalai/20221020-011911/kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generated answers file successfully: digitalai/generated_answers_dai-deploy_digitalai_upgrade-20221020-011911.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting upgrade processing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>During upgrade for the question <code>Edit list of custom resource keys that will migrate to the new Deploy CR:</code> append to the list following keys:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-default-image-registry">For Default image registry<a class="hash-link" aria-label="Direct link to For Default image registry" title="Direct link to For Default image registry" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#for-default-image-registry">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.spec.TinyToolsImageRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.defaultBackend.image.registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.defaultBackend.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.image.registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.haproxy-ingress.controller.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.postgresql.image.registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.postgresql.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.postgresql.image.registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.postgresql.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.image.registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.volumePermissions.image.registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.volumePermissions.image.repository</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-custom-docker-registry-public">For custom docker registry (public)<a class="hash-link" aria-label="Direct link to For custom docker registry (public)" title="Direct link to For custom docker registry (public)" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#for-custom-docker-registry-public">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.spec.TinyToolsImageRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.defaultBackend.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.global.imageRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.haproxy-ingress.controller.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.postgresql.image.registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.postgresql.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.postgresql.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.postgresql.global.imageRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.global.imageRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.volumePermissions.image.repository</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-custom-docker-registry-private">For custom docker registry (private)<a class="hash-link" aria-label="Direct link to For custom docker registry (private)" title="Direct link to For custom docker registry (private)" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#for-custom-docker-registry-private">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.spec.TinyToolsImageRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.defaultBackend.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.global.imageRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.haproxy-ingress.controller.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.postgresql.image.registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.postgresql.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.postgresql.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.postgresql.global.imageRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.global.imageRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.volumePermissions.image.repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.nginx-ingress-controller.global.imagePullSecrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.imagePullSecrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.keycloak.postgresql.imagePullSecrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.postgresql.global.imagePullSecrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.spec.rabbitmq.global.imagePullSecrets</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="image-repository-related-fields-that-are-getting-updated-in-installation-and-upgrade-process-by-xl-cli-when-using-custom-image-registry">Image repository related fields that are getting updated in Installation and Upgrade process by xl cli when using custom image registry<a class="hash-link" aria-label="Direct link to Image repository related fields that are getting updated in Installation and Upgrade process by xl cli when using custom image registry" title="Direct link to Image repository related fields that are getting updated in Installation and Upgrade process by xl cli when using custom image registry" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#image-repository-related-fields-that-are-getting-updated-in-installation-and-upgrade-process-by-xl-cli-when-using-custom-image-registry">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetesdai-deploy_cryaml">kubernetes/dai-deploy_cr.yaml<a class="hash-link" aria-label="Direct link to kubernetes/dai-deploy_cr.yaml" title="Direct link to kubernetes/dai-deploy_cr.yaml" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#kubernetesdai-deploy_cryaml">​</a></h4>
<ul>
<li>spec.centralConfiguration.image.repository: &quot;myrepo_host/myrepo/central-configuration&quot;</li>
<li>spec.ServerImageRepository: &quot;myrepo_host/myrepo/xl-deploy&quot;</li>
<li>spec.WorkerImageRepository: &quot;myrepo_host/myrepo/deploy-task-engine&quot;</li>
<li>spec.TinyToolsImageRepository: &quot;myrepo_host/myrepo/tiny-tools&quot;</li>
<li>spec.ImagePullSecret: regcred (only for custom private image registry requiring authentication)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-nginx">If you are using nginx<a class="hash-link" aria-label="Direct link to If you are using nginx" title="Direct link to If you are using nginx" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-nginx">​</a></h4>
<ul>
<li>spec.nginx-ingress-controller.defaultBackend.image.registry: myrepo_host</li>
<li>spec.nginx-ingress-controller.defaultBackend.image.repository: myrepo/nginx</li>
<li>spec.nginx-ingress-controller.image.registry: myrepo_host</li>
<li>spec.nginx-ingress-controller.image.repository: myrepo/nginx-ingress-controller</li>
<li>spec.nginx-ingress-controller.imagePullSecrets.[0]: regcred (only for custom private image registry requiring authentication)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-haproxy">If you are using haproxy<a class="hash-link" aria-label="Direct link to If you are using haproxy" title="Direct link to If you are using haproxy" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-haproxy">​</a></h4>
<ul>
<li>spec.haproxy-ingress.controller.image.repository: myrepo_host/myrepo/haproxy-ingress</li>
<li>spec.haproxy-ingress.imagePullSecrets[0].name: regcred (only for custom private image registry requiring authentication)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-embedded-keycloak">If you are using embedded keycloak<a class="hash-link" aria-label="Direct link to If you are using embedded keycloak" title="Direct link to If you are using embedded keycloak" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-embedded-keycloak">​</a></h4>
<ul>
<li>spec.keycloak.image.repository: myrepo_host/myrepo/keycloak</li>
<li>spec.keycloak.postgresql.image.registry: myrepo_host</li>
<li>spec.keycloak.postgresql.image.repository: myrepo/postgresql</li>
<li>spec.keycloak.imagePullSecrets[0].name: regcred (only for custom private image registry requiring authentication)</li>
<li>spec.keycloak.postgres.imagePullSecrets[0].name: regcred (only for custom private image registry requiring authentication)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-embedded-postgresql">If you are using embedded postgresql<a class="hash-link" aria-label="Direct link to If you are using embedded postgresql" title="Direct link to If you are using embedded postgresql" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-embedded-postgresql">​</a></h4>
<ul>
<li>spec.postgresql.image.registry: myrepo_host</li>
<li>spec.postgresql.image.repository: myrepo/postgresql</li>
<li>spec.postgres.global.imagePullSecrets.[0]: regcred (only for custom private image registry requiring authentication)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="if-you-are-using-embedded-rabbitmq">If you are using embedded rabbitmq<a class="hash-link" aria-label="Direct link to If you are using embedded rabbitmq" title="Direct link to If you are using embedded rabbitmq" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#if-you-are-using-embedded-rabbitmq">​</a></h4>
<ul>
<li>spec.rabbitmq.image.registry: myrepo_host</li>
<li>spec.rabbitmq.image.repository: myrepo/rabbitmq</li>
<li>spec.rabbitmq.volumePermissions.image.registry: myrepo_host</li>
<li>spec.rabbitmq.volumePermissions.image.repository: myrepo/bitnami-shell</li>
<li>spec.rabbitmq.global.imagePullSecrets.[0]: regcred (only for custom private image registry requiring authentication)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetestemplatedeploymentyaml">kubernetes/template/deployment.yaml<a class="hash-link" aria-label="Direct link to kubernetes/template/deployment.yaml" title="Direct link to kubernetes/template/deployment.yaml" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#kubernetestemplatedeploymentyaml">​</a></h4>
<ul>
<li>spec.template.spec.containers[0].image: myrepo_host/myrepo/kube-rbac-proxy<!-- -->:v0<!-- -->.8.0</li>
<li>spec.template.spec.containers[1].image: myrepo_host/myrepo/deploy-operator<!-- -->:operator-imageTag-given-in-xl-cmd-question</li>
<li>spec.template.spec.imagePullSecrets[0].name: regcred (only for custom private image registry requiring authentication)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetestemplatepostgresql-init-keycloak-dbyaml">kubernetes/template/postgresql-init-keycloak-db.yaml<a class="hash-link" aria-label="Direct link to kubernetes/template/postgresql-init-keycloak-db.yaml" title="Direct link to kubernetes/template/postgresql-init-keycloak-db.yaml" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#kubernetestemplatepostgresql-init-keycloak-dbyaml">​</a></h4>
<ul>
<li>spec.template.spec.initContainers[0].image: myrepo_host/myrepo/tiny-tools:22.2.0</li>
<li>spec.template.spec.containers[0].image: myrepo_host/myrepo/tiny-tools:22.2.0</li>
<li>spec.template.spec.imagePullSecrets[0].name: regcred (only for custom private image registry requiring authentication)</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/xl-deploy-kubernetes-helm-chart/docs/integrating-with-identity-service"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Manual integration with the Identity Service</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/xl-deploy-kubernetes-helm-chart/docs/operator-rbac"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">RBAC rules for the Deploy installation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#requirements">Requirements</a></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#installation-steps">Installation steps</a><ul><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#download-matching-version-of-the-xl-op-blueprints">Download matching version of the xl-op-blueprints</a></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#get-the-operator-related-images-to-your-image-registry">Get the operator related images to your image registry</a></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#how-to-push-image-to-internally-accessible-docker-registry">How to push image to internally accessible docker registry</a></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#create-registry-secret-if-using-a-private-image-registry-protected-by-password">Create registry secret if using a private image registry protected by password</a></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#use-xl-kube-install-to-install-using-custom-docker-image-registry-option">Use <code>xl kube install</code> to install using custom docker image registry option</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#upgrade-steps">Upgrade steps</a><ul><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#example-of-running-upgrade-using-custom-docker-image-registry-option">Example of running upgrade using custom docker image registry option</a></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#for-default-image-registry">For Default image registry</a></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#for-custom-docker-registry-public">For custom docker registry (public)</a></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#for-custom-docker-registry-private">For custom docker registry (private)</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/xl-deploy-kubernetes-helm-chart/docs/air-gapped-installation#image-repository-related-fields-that-are-getting-updated-in-installation-and-upgrade-process-by-xl-cli-when-using-custom-image-registry">Image repository related fields that are getting updated in Installation and Upgrade process by xl cli when using custom image registry</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/xl-deploy-kubernetes-helm-chart/docs/intro">Tutorial</a></li><li class="footer__item"><a href="https://github.com/xebialabs/xl-deploy-kubernetes-helm-chart" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Deploy Kubernetes Helm Chart Digital.ai</div></div></div></footer></div>
</body>
</html>